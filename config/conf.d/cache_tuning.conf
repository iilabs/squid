# Cache tuning for long-lived build artifacts (1-year retention)
# Times are expressed in minutes.

# Immutable container layers and image configs addressed by digest.
refresh_pattern -i (blobs/(sha256|sha512):|manifests/(sha256|sha512):) 525600 100% 525600 override-expire ignore-no-cache ignore-private ignore-reload reload-into-ims

# Large package archives (RPM/DEB/APK) and common build artifact formats.
refresh_pattern -i \.(rpm|drpm|srpm|deb|udeb|pkg\.tar\.(xz|zst)|apk|iso|img|qcow2|ova|vhdx|vmdk|tar\.(gz|bz2|xz|zst)|tgz|txz|tbz2|zip)$ 525600 100% 525600 override-expire ignore-no-cache ignore-private ignore-reload reload-into-ims

# OSTree static objects (filez, commits, metadata) referenced by checksum.
refresh_pattern -i objects/[0-9a-f]{2}/[0-9a-f]{2}/[0-9a-f]{62}\.(filez|commit|dirmeta|dirtree|sig) 525600 100% 525600 override-expire ignore-no-cache ignore-private ignore-reload reload-into-ims

# Tag-based container manifests change more frequently; keep them warm but refresh weekly.
refresh_pattern -i (manifests/(latest|[^/]+)$|tags/list) 1440 100% 10080 ignore-reload
